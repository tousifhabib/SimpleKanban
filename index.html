<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple Kanban Board</title>
  </head>
  <body>
    <header>
      <div class="header-section">
        <h1 data-i18n="header.title">Simple Kanban</h1>
        <nav class="header-nav">
          <button
            class="nav-btn active"
            data-view="kanban"
            data-i18n="nav.kanban"
          >
            üìã Kanban
          </button>
          <button class="nav-btn" data-view="gantt" data-i18n="nav.gantt">
            üìä Gantt
          </button>
        </nav>
        <select
          id="langSelector"
          class="board-select"
          style="margin-left: 10px; width: auto"
        ></select>
        <div class="board-selector-wrapper">
          <select id="boardSelector" class="board-select"></select>
          <button
            class="header-btn-icon"
            id="addBoardBtn"
            data-i18n="header.titles.addBoard"
            data-i18n-attr="title"
          >
            +
          </button>
          <button
            class="header-btn-icon"
            id="renameBoardBtn"
            data-i18n="header.titles.renameBoard"
            data-i18n-attr="title"
          >
            ‚úèÔ∏è
          </button>
          <button
            class="header-btn-icon danger"
            id="deleteBoardBtn"
            data-i18n="header.titles.deleteBoard"
            data-i18n-attr="title"
          >
            üóë
          </button>
        </div>
      </div>
      <div class="header-actions" id="kanbanActions">
        <button
          class="header-btn randomizer-btn"
          id="randomPickerBtn"
          data-i18n="header.pickForMe"
        >
          üé≤ Pick for me
        </button>
        <button
          class="header-btn-icon"
          id="optionsBtn"
          data-i18n="header.titles.options"
          data-i18n-attr="title"
        >
          ‚öôÔ∏è
        </button>
        <div class="divider"></div>
        <input type="file" id="importFileInput" hidden accept=".json" />
        <button class="header-btn" id="importBtn" data-i18n="header.import">
          üì• Import
        </button>
        <button class="header-btn" id="exportBtn" data-i18n="header.export">
          üì§ Export
        </button>
        <div class="divider"></div>
        <button
          class="header-btn"
          id="manageLabelBtn"
          data-i18n="header.labels"
        >
          üè∑Ô∏è Labels
        </button>
        <button
          class="add-column-btn"
          id="addColumnBtn"
          data-i18n="header.addColumn"
        >
          + Add Column
        </button>
      </div>
    </header>

    <!-- Kanban View -->
    <div id="kanbanView">
      <div class="filter-bar" id="filterBar">
        <div class="filter-group">
          <span class="filter-label" data-i18n="filters.label">Filter by:</span>
          <select id="filterLabel" class="filter-select">
            <option value="all" data-i18n="filters.allLabels">
              All Labels
            </option>
          </select>
          <select id="filterPriority" class="filter-select">
            <option value="all" data-i18n="filters.allPriorities">
              All Priorities
            </option>
            <option value="high" data-i18n="card.priorities.high">High</option>
            <option value="medium" data-i18n="card.priorities.medium">
              Medium
            </option>
            <option value="low" data-i18n="card.priorities.low">Low</option>
            <option value="none" data-i18n="card.priorities.none">None</option>
          </select>
          <button
            id="clearFilters"
            class="btn-clear-filters"
            data-i18n="filters.clear"
          >
            Clear
          </button>
        </div>
      </div>

      <div class="kanban-container" id="kanbanContainer"></div>
    </div>

    <div id="ganttView" class="gantt-view" style="display: none"></div>

    <div class="modal" id="createBoardModal" aria-hidden="true">
      <div class="modal-overlay" id="createBoardOverlay"></div>
      <div class="modal-content" role="dialog" aria-modal="true">
        <h2 data-i18n="modals.createBoard.title">Create New Board</h2>
        <form id="createBoardForm">
          <input
            type="text"
            id="newBoardName"
            class="column-input"
            data-i18n="modals.createBoard.placeholder"
            data-i18n-attr="placeholder"
            required
          />
          <label
            class="card-detail-label"
            data-i18n="modals.createBoard.templateLabel"
            >Template</label
          >
          <select
            id="newBoardTemplate"
            class="priority-select"
            style="margin-bottom: 16px"
          >
            <option
              value="empty"
              data-i18n="modals.createBoard.templates.empty"
            >
              Empty Board
            </option>
            <option
              value="basic"
              selected
              data-i18n="modals.createBoard.templates.basic"
            >
              Basic Kanban (To Do, Doing, Done)
            </option>
            <option
              value="software"
              data-i18n="modals.createBoard.templates.software"
            >
              Software Dev (Backlog, Ready, In Progress, Review, Done)
            </option>
            <option
              value="sales"
              data-i18n="modals.createBoard.templates.sales"
            >
              Sales Pipeline (Lead, Contacted, Proposal, Closed)
            </option>
          </select>
          <div class="button-group">
            <button
              type="submit"
              class="btn btn-primary"
              data-i18n="modals.createBoard.btnCreate"
            >
              Create
            </button>
            <button
              type="button"
              class="btn btn-secondary"
              id="cancelCreateBoard"
              data-i18n="modals.createBoard.btnCancel"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal" id="renameBoardModal" aria-hidden="true">
      <div class="modal-overlay" id="renameBoardOverlay"></div>
      <div class="modal-content" role="dialog" aria-modal="true">
        <h2 data-i18n="modals.renameBoard.title">Rename Board</h2>
        <form id="renameBoardForm">
          <input
            type="text"
            id="renameBoardName"
            class="column-input"
            data-i18n="modals.renameBoard.placeholder"
            data-i18n-attr="placeholder"
            required
          />
          <div class="button-group">
            <button
              type="submit"
              class="btn btn-primary"
              data-i18n="modals.renameBoard.btnSave"
            >
              Save
            </button>
            <button
              type="button"
              class="btn btn-secondary"
              id="cancelRenameBoard"
              data-i18n="modals.renameBoard.btnCancel"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal" id="deleteBoardModal" aria-hidden="true">
      <div class="modal-overlay" id="deleteBoardOverlay"></div>
      <div class="modal-content" role="dialog" aria-modal="true">
        <h2 data-i18n="modals.deleteBoard.title">Delete Board</h2>
        <p style="margin-top: 0" id="deleteBoardMessage"></p>
        <div class="button-group">
          <button
            type="button"
            class="btn btn-primary"
            id="confirmDeleteBoard"
            data-i18n="modals.deleteBoard.btnDelete"
          >
            Delete
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            id="cancelDeleteBoard"
            data-i18n="modals.deleteBoard.btnCancel"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <div class="modal" id="addColumnModal" aria-hidden="true">
      <div class="modal-overlay" id="modalOverlay"></div>
      <div
        class="modal-content"
        role="dialog"
        aria-labelledby="modalTitle"
        aria-modal="true"
      >
        <h2 id="modalTitle" data-i18n="modals.addColumn.title">
          Add New Column
        </h2>
        <form id="addColumnForm">
          <input
            type="text"
            id="columnTitleInput"
            class="column-input"
            data-i18n="modals.addColumn.placeholder"
            data-i18n-attr="placeholder"
            required
          />
          <div class="button-group">
            <button
              type="submit"
              class="btn btn-primary"
              data-i18n="modals.addColumn.btnAdd"
            >
              Add Column
            </button>
            <button
              type="button"
              class="btn btn-secondary"
              id="cancelAddColumn"
              data-i18n="modals.addColumn.btnCancel"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal" id="cardDetailModal" aria-hidden="true">
      <div class="modal-overlay" id="cardDetailOverlay"></div>
      <div
        class="modal-content card-detail-content"
        role="dialog"
        aria-labelledby="cardDetailTitle"
        aria-modal="true"
      >
        <button class="modal-close-btn" id="cardDetailCloseBtn">&times;</button>
        <form id="cardDetailForm">
          <div class="card-detail-header">
            <label class="completion-toggle">
              <input
                type="checkbox"
                id="cardCompletedInput"
                class="completion-checkbox"
              />
              <span class="completion-checkmark"></span>
            </label>
            <input
              type="text"
              id="cardTitleInput"
              class="card-title-input"
              data-i18n="card.detail.placeholderTitle"
              data-i18n-attr="placeholder"
              required
            />
          </div>

          <div class="card-detail-section">
            <label class="card-detail-label">
              <span class="card-detail-icon">üè∑Ô∏è</span>
              <span data-i18n="card.detail.labels">Labels</span>
            </label>
            <div class="labels-selector" id="labelsSelector"></div>
          </div>

          <div class="card-detail-row">
            <div class="card-detail-field">
              <label for="cardStartDateInput" class="card-detail-label">
                <span class="card-detail-icon">üü¢Ô∏è</span>
                <span data-i18n="card.detail.startDate">Start Date</span>
              </label>
              <input type="date" id="cardStartDateInput" class="date-input" />
            </div>
            <div class="card-detail-field">
              <label for="cardDueDateInput" class="card-detail-label">
                <span class="card-detail-icon">üî¥</span>
                <span data-i18n="card.detail.dueDate">Due Date</span>
              </label>
              <input type="date" id="cardDueDateInput" class="date-input" />
            </div>
            <div class="card-detail-field">
              <label for="cardEffortInput" class="card-detail-label">
                <span class="card-detail-icon">‚è±Ô∏è</span>
                <span data-i18n="card.detail.effort">Effort (h)</span>
              </label>
              <input
                type="number"
                id="cardEffortInput"
                class="date-input"
                step="0.5"
                min="0"
                placeholder="0"
              />
            </div>
          </div>

          <div class="card-detail-section">
            <label for="cardPriorityInput" class="card-detail-label">
              <span class="card-detail-icon">üö©</span>
              <span data-i18n="card.detail.priority">Priority</span>
            </label>
            <select id="cardPriorityInput" class="priority-select">
              <option value="none" data-i18n="card.priorities.none">
                None
              </option>
              <option value="low" data-i18n="card.priorities.low">Low</option>
              <option value="medium" data-i18n="card.priorities.medium">
                Medium
              </option>
              <option value="high" data-i18n="card.priorities.high">
                High
              </option>
            </select>
          </div>

          <div class="card-detail-section">
            <label for="cardDescriptionInput" class="card-detail-label">
              <span class="card-detail-icon">üìù</span>
              <span data-i18n="card.detail.description">Description</span>
            </label>
            <textarea
              id="cardDescriptionInput"
              class="card-description-input"
              data-i18n="card.detail.placeholderDesc"
              data-i18n-attr="placeholder"
              rows="4"
            ></textarea>
          </div>

          <div class="card-detail-section">
            <label class="card-detail-label">
              <span class="card-detail-icon">üîó</span>
              <span data-i18n="card.detail.dependencies">Dependencies</span>
            </label>
            <div class="dependencies-section">
              <div id="dependenciesList" class="dependencies-list"></div>
              <div class="add-dependency-form">
                <select id="dependencySelect" class="priority-select">
                  <option value="" data-i18n="card.detail.selectTask">
                    Select a task...
                  </option>
                </select>
                <button
                  type="button"
                  class="btn btn-secondary"
                  id="addDependencyBtn"
                  data-i18n="card.detail.addDependency"
                >
                  Add
                </button>
              </div>
            </div>
          </div>

          <div class="card-detail-section">
            <label class="card-detail-label">
              <span class="card-detail-icon">üìã</span>
              <span data-i18n="card.detail.workLog">Work Log</span>
            </label>
            <div id="cardLogList" class="card-log-list"></div>
            <div class="card-log-input-container">
              <textarea
                id="newLogInput"
                class="card-description-input"
                data-i18n="card.detail.placeholderLog"
                data-i18n-attr="placeholder"
                rows="2"
                style="min-height: 60px; margin-bottom: 8px"
              ></textarea>
              <button
                type="button"
                class="btn btn-secondary"
                id="addLogBtn"
                style="font-size: 0.85rem"
                data-i18n="card.detail.addEntry"
              >
                Add Entry
              </button>
            </div>
          </div>

          <div class="button-group">
            <button
              type="submit"
              class="btn btn-primary"
              data-i18n="card.detail.save"
            >
              Save
            </button>
            <button
              type="button"
              class="btn btn-secondary"
              id="cancelCardDetail"
              data-i18n="card.detail.cancel"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <div class="modal" id="manageLabelModal" aria-hidden="true">
      <div class="modal-overlay" id="manageLabelOverlay"></div>
      <div
        class="modal-content"
        role="dialog"
        aria-labelledby="manageLabelTitle"
        aria-modal="true"
      >
        <button class="modal-close-btn" id="manageLabelCloseBtn">
          &times;
        </button>
        <h2 id="manageLabelTitle" data-i18n="modals.manageLabels.title">
          Manage Labels
        </h2>
        <div class="labels-list" id="labelsList"></div>
        <div class="add-label-form">
          <input
            type="text"
            id="newLabelName"
            class="label-name-input"
            data-i18n="modals.manageLabels.placeholderName"
            data-i18n-attr="placeholder"
          />
          <input
            type="color"
            id="newLabelColor"
            class="label-color-input"
            value="#5e6c84"
          />
          <button
            type="button"
            class="btn btn-primary"
            id="addLabelBtn"
            data-i18n="modals.manageLabels.btnAdd"
          >
            Add
          </button>
        </div>
      </div>
    </div>

    <div class="modal" id="optionsModal" aria-hidden="true">
      <div class="modal-overlay" id="optionsOverlay"></div>
      <div
        class="modal-content"
        role="dialog"
        aria-labelledby="optionsTitle"
        aria-modal="true"
      >
        <button class="modal-close-btn" id="optionsCloseBtn">&times;</button>
        <h2 id="optionsTitle" data-i18n="modals.options.title">Options</h2>

        <div class="options-section">
          <h3 data-i18n="modals.options.randomizer.title">
            üé≤ Random Picker Settings
          </h3>
          <p
            class="options-description"
            data-i18n="modals.options.randomizer.description"
          >
            Configure how "Pick for me" selects your next task.
          </p>

          <div class="options-group">
            <label class="options-checkbox">
              <input type="checkbox" id="optFactorPriority" checked />
              <span data-i18n="modals.options.randomizer.factorPriority"
                >Weight by priority</span
              >
            </label>
            <span
              class="options-hint"
              data-i18n="modals.options.randomizer.factorPriorityHint"
            >
              High priority cards are more likely to be picked
            </span>
          </div>

          <div class="options-group">
            <label class="options-checkbox">
              <input type="checkbox" id="optFactorDueDate" checked />
              <span data-i18n="modals.options.randomizer.factorDueDate"
                >Weight by due date</span
              >
            </label>
            <span
              class="options-hint"
              data-i18n="modals.options.randomizer.factorDueDateHint"
            >
              Cards due sooner are more likely to be picked
            </span>
          </div>

          <div class="options-group">
            <label class="options-checkbox">
              <input type="checkbox" id="optFactorAging" checked />
              <span data-i18n="modals.options.randomizer.factorAging"
                >Weight by age</span
              >
            </label>
            <span
              class="options-hint"
              data-i18n="modals.options.randomizer.factorAgingHint"
            >
              Older cards are more likely to be picked to prevent neglect
            </span>
          </div>

          <div class="options-group">
            <label class="options-checkbox">
              <input type="checkbox" id="optExcludeCompleted" checked />
              <span data-i18n="modals.options.randomizer.excludeCompleted"
                >Exclude completed cards</span
              >
            </label>
          </div>

          <div class="options-group">
            <label
              class="card-detail-label"
              data-i18n="modals.options.randomizer.includeColumns"
            >
              Include only these columns (leave empty for all):
            </label>
            <div class="options-columns-list" id="optColumnsSelector"></div>
          </div>
        </div>

        <div class="button-group" style="margin-top: 24px">
          <button
            type="button"
            class="btn btn-primary"
            id="saveOptionsBtn"
            data-i18n="modals.options.btnSave"
          >
            Save
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            id="resetOptionsBtn"
            data-i18n="modals.options.btnReset"
          >
            Reset to Defaults
          </button>
        </div>
      </div>
    </div>

    <div class="modal" id="randomPickerModal" aria-hidden="true">
      <div class="modal-overlay" id="randomPickerOverlay"></div>
      <div
        class="modal-content randomizer-result-content"
        role="dialog"
        aria-labelledby="randomPickerTitle"
        aria-modal="true"
      >
        <button class="modal-close-btn" id="randomPickerCloseBtn">
          &times;
        </button>
        <div class="randomizer-header">
          <span class="randomizer-icon">üé≤</span>
          <h2 id="randomPickerTitle" data-i18n="modals.randomPicker.title">
            Your Next Task
          </h2>
        </div>

        <div class="randomizer-result" id="randomPickerResult">
          <div class="randomizer-card-preview" id="randomPickerCard"></div>
          <div class="randomizer-column-info" id="randomPickerColumnInfo"></div>
        </div>

        <div
          class="randomizer-empty"
          id="randomPickerEmpty"
          style="display: none"
        >
          <span class="empty-icon">üéâ</span>
          <p data-i18n="modals.randomPicker.noCards">
            No eligible cards found! You might be all caught up.
          </p>
        </div>

        <div class="randomizer-stats" id="randomPickerStats"></div>

        <div class="button-group">
          <button
            type="button"
            class="btn btn-primary"
            id="goToCardBtn"
            data-i18n="modals.randomPicker.goToCard"
          >
            Open Card
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            id="pickAgainBtn"
            data-i18n="modals.randomPicker.pickAgain"
          >
            üé≤ Pick Again
          </button>
        </div>
      </div>
    </div>

    <template id="columnTemplate">
      <div class="column" draggable="true">
        <div class="column-header">
          <div class="column-title-container">
            <h2 class="column-title-text" title="Click to edit"></h2>
            <input
              type="text"
              class="column-title-input"
              style="display: none"
            />
          </div>
          <button data-action="delete-column">&times;</button>
        </div>
        <div class="cards"></div>
        <button class="add-card-btn">+ Add a card</button>
        <div class="add-card-form">
          <textarea
            class="card-input"
            rows="3"
            placeholder="Enter card title..."
          ></textarea>
          <div class="button-group">
            <button class="btn btn-primary" data-action="confirm-add-card">
              Add Card
            </button>
            <button class="btn btn-secondary" data-action="cancel-add-card">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </template>

    <template id="cardTemplate">
      <div class="card" draggable="true">
        <div class="card-labels"></div>
        <div class="card-content">
          <label class="card-complete-toggle">
            <input type="checkbox" class="card-complete-checkbox" />
            <span class="card-complete-checkmark"></span>
          </label>
          <span class="card-text"></span>
        </div>
        <div class="card-meta"></div>
        <span class="card-has-description" title="Has notes">üìù</span>
        <div class="card-actions">
          <button class="card-action-btn" data-action="edit" title="Edit">
            ‚úèÔ∏è
          </button>
          <button
            class="card-action-btn"
            data-action="duplicate"
            title="Duplicate"
          >
            üìã
          </button>
          <button class="card-action-btn" data-action="delete" title="Delete">
            üóë
          </button>
        </div>
      </div>
    </template>

    <script type="module" src="js/index.js"></script>
  </body>
</html>
